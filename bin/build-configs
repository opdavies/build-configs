#!/usr/bin/env php
<?php

declare(strict_types=1);

require __DIR__.'/../vendor/autoload.php';

use OliverDaviesLtd\BuildConfigs\Command\GenerateCommand;
use OliverDaviesLtd\BuildConfigs\Command\InitCommand;
use Silly\Edition\PhpDi\Application;

$app = new Application('build-configs');

$app->command(
        expression: 'init [-p|--project-name=] [-l|--language=] [-t|--type=]',
        callable: InitCommand::class,
    )
    ->descriptions(
        description: 'Initialise a new build.yaml file.',
        argumentAndOptionDescriptions: [
            '--project-name' => 'The name of the project.',
            '--language' => 'The language used in the project.',
            '--type' => 'The project type.',
        ],
    );

$app->command(
        expression: 'generate [-c|--config-file=] [-o|--output-dir=]',
        callable: GenerateCommand::class,
    )
    ->descriptions(
        description: 'Generate configuration files.',
        argumentAndOptionDescriptions: [
            '--config-file' => 'The path to the project\'s build.yaml file',
            '--output-dir' => 'The directory to create files in',
        ],
    )
    ->defaults(defaults: [
        'config-file' => 'build.yaml',
        'output-dir' => '.',
    ]);

$app->run();
